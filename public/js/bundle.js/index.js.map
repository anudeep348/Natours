{"mappings":"AGAa,MAAA,EAAN,KACL,IAAM,EAAK,SAAS,aAAa,CAAC,UAC9B,GAAI,EAAG,aAAa,CAAC,WAAW,CAAC,EACvC,EAEa,EAAY,CAAC,EAAM,KAC9B,IACA,IAAM,EAAS,CAAC,yBAAyB,EAAE,EAAK,EAAE,EAAE,EAAI,MAAM,CAAC,CAC/D,SAAS,aAAa,CAAC,QAAQ,kBAAkB,CAAC,aAAc,GAEhE,OAAO,UAAU,CAAC,EAAW,IAC/B,EDRa,EAAQ,MAAO,EAAO,KACjC,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CACtB,OAAQ,OACR,IAAK,sBACL,KAAM,CACJ,MAAA,EACA,SAAA,CACF,CACF,EAEwB,CAAA,YAApB,EAAI,IAAI,CAAC,MAAM,GACjB,AAAA,EAAU,UAAW,2BACrB,OAAO,UAAU,CAAC,KAChB,SAAS,MAAM,CAAC,IAClB,EAAG,MAEP,CAAE,MAAO,EAAK,CACO,IAAA,EAAnB,AAAA,EAAU,QAAA,AAAqB,OAAZ,CAAA,EAAA,EAAI,QAAQ,AAAR,GAAJ,AAAA,KAAA,IAAA,EAAA,KAAA,EAAA,EAAc,IAAI,CAAC,OAAO,CAC/C,CACF,EAEa,EAAS,UACpB,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CACtB,OAAQ,MACR,IAAK,sBACP,EAEwB,CAAA,YAApB,EAAI,IAAI,CAAC,MAAM,GACjB,AAAA,EAAU,UAAW,4BACrB,OAAO,UAAU,CAAC,KAChB,SAAS,MAAM,CAAC,IAClB,EAAG,KAEP,CAAE,MAAO,EAAK,CACZ,AAAA,EAAU,QAAS,+BACrB,CACF,EGrCa,EAAiB,MAAO,EAAM,KACzC,GAAI,CAMF,IAAM,EAAM,MAAM,MAAM,CACtB,OAAQ,QACR,IANA,AAAS,aAAT,EACI,iCACA,yBAKJ,KAAA,CACF,EACwB,CAAA,YAApB,EAAI,IAAI,CAAC,MAAM,GACjB,AAAA,EAAU,UAAW,CAAC,EAAE,EAAK,WAAW,GAAG,qBAAqB,CAAC,EACjE,OAAO,UAAU,CAAC,KAChB,SAAS,MAAM,CAAC,CAAA,EAClB,EAAG,MAEP,CAAE,MAAO,EAAK,CACZ,AAAA,EAAU,QAAS,EAAI,QAAQ,CACjC,CACF,ECvBM,EAAS,OACb,+GAGW,EAAW,MAAO,IAC7B,GAAI,CAEF,IAAM,EAAU,MAAM,MAAM,CAC1B,OAAQ,MACR,IAAK,CAAC,kCAAkC,EAAE,EAAO,CAAC,AACpD,EAEA,OAAM,EAAO,kBAAkB,CAAC,CAC9B,UAAW,EAAQ,IAAI,CAAC,OAAO,CAAC,EAAE,AACpC,EACF,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,GACd,AAAA,EAAU,QAAS,EACrB,CACF,ELZM,EAAM,SAAS,cAAc,CAAC,OAC9B,EAAO,SAAS,cAAc,CAAC,cAC/B,EAAY,SAAS,aAAa,CAAC,oBACnC,EAAe,SAAS,cAAc,CAAC,aACvC,EAAmB,SAAS,cAAc,CAAC,iBAC3C,EAAU,SAAS,cAAc,CAAC,aAGpC,GAEF,AGjBwB,CAAA,AAAC,IAEzB,IAAM,EAAM,EAAE,GAAG,CAAC,MAAO,CAAE,YAAa,CAAA,CAAM,GAG9C,EAAE,SAAS,CAAC,qDAAsD,CAChE,YACE,yFACJ,GAAG,KAAK,CAAC,GAGT,IAAI,EAAY,EAAE,IAAI,CAAC,CACrB,QAAS,eACT,SAAU,CAAC,GAAI,GAAG,CAClB,WAAY,CAAC,GAAI,GAAG,CACpB,YAAa,CAAC,EAAG,IAAI,AACvB,GAGA,IAAM,EAAS,EAAE,CACjB,EAAU,OAAO,CAAC,AAAC,IAEjB,EAAO,IAAI,CAAC,CAAC,EAAI,WAAW,CAAC,EAAE,CAAE,EAAI,WAAW,CAAC,EAAE,CAAC,EAGpD,EAAE,MAAM,CAAC,CAAC,EAAI,WAAW,CAAC,EAAE,CAAE,EAAI,WAAW,CAAC,EAAE,CAAC,CAAE,CAAE,KAAM,CAAU,GAClE,KAAK,CAAC,GAEN,SAAS,CAAC,CAAC,OAAO,EAAE,EAAI,GAAG,CAAC,EAAE,EAAE,EAAI,WAAW,CAAC,IAAI,CAAC,CAAE,CACtD,UAAW,CAAA,EACX,UAAW,UACb,GACC,EAAE,CAAC,YAAa,SAAU,CAAC,EAC1B,IAAI,CAAC,SAAS,EAChB,GACC,EAAE,CAAC,WAAY,SAAU,CAAC,EACzB,IAAI,CAAC,UAAU,EACjB,EACJ,GAGA,IAAM,EAAS,EAAE,YAAY,CAAC,GAAQ,GAAG,CAAC,IAC1C,EAAI,SAAS,CAAC,GAGd,EAAI,eAAe,CAAC,OAAO,EAC7B,CAAA,EH9BoB,KAAK,KAAK,CAAC,EAAI,OAAO,CAAC,SAAS,GAKhD,GACF,EAAK,gBAAgB,CAAC,SAAU,AAAC,IAC/B,EAAE,cAAc,GAGhB,AAAA,EAFc,SAAS,cAAc,CAAC,SAAS,KAAK,CACnC,SAAS,cAAc,CAAC,YAAY,KAAK,CAE5D,GAIE,GACF,EAAU,gBAAgB,CAAC,QAAS,GAIlC,GACF,EAAa,gBAAgB,CAAC,SAAU,AAAC,IACvC,EAAE,cAAc,GAChB,IAAM,EAAO,IAAI,SACjB,EAAK,MAAM,CAAC,OAAQ,SAAS,cAAc,CAAC,QAAQ,KAAK,EACzD,EAAK,MAAM,CAAC,QAAS,SAAS,cAAc,CAAC,SAAS,KAAK,EAC3D,EAAK,MAAM,CAAC,QAAS,SAAS,cAAc,CAAC,SAAS,KAAK,CAAC,EAAE,EAC9D,AAAA,EAAe,EAAM,OACvB,GAGE,GACF,EAAiB,gBAAgB,CAAC,SAAU,MAAO,IACjD,EAAE,cAAc,GAEhB,SAAS,cAAc,CAAC,qBAAqB,WAAW,CAAG,cAG3D,IAAM,EAAkB,SAAS,cAAc,CAAC,oBAAoB,KAAK,CACnE,EAAW,SAAS,cAAc,CAAC,YAAY,KAAK,CACpD,EAAkB,SAAS,cAAc,CAAC,oBAAoB,KAAK,AAGzE,OAAM,AAAA,EACJ,CAAE,gBAAA,EAAiB,SAAA,EAAU,gBAAA,CAAgB,EAC7C,YAIF,SAAS,cAAc,CAAC,qBAAqB,WAAW,CAAG,gBAG3D,SAAS,cAAc,CAAC,oBAAoB,KAAK,CAAG,GACpD,SAAS,cAAc,CAAC,YAAY,KAAK,CAAG,GAC5C,SAAS,cAAc,CAAC,oBAAoB,KAAK,CAAG,EACtD,GAGE,GACF,EAAQ,gBAAgB,CAAC,QAAS,AAAC,IAEjC,EAAE,MAAM,CAAC,WAAW,CAAG,gBACvB,GAAM,CAAA,OAAE,CAAM,CAAE,CAAG,EAAE,MAAM,CAAC,OAAO,CACnC,AAAA,EAAS,EACX","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alert.js","public/js/leaflet.js","public/js/updateSettings.js","public/js/stripe.js"],"sourcesContent":["/* eslint-disable */ /* eslint-disable */ const $e9c91518574fdb31$export$516836c6a9dfc573 = ()=>{\n    const el = document.querySelector(\".alert\");\n    if (el) el.parentElement.removeChild(el);\n};\nconst $e9c91518574fdb31$export$de026b00723010c1 = (type, msg)=>{\n    $e9c91518574fdb31$export$516836c6a9dfc573();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector(\"body\").insertAdjacentHTML(\"afterbegin\", markup);\n    window.setTimeout($e9c91518574fdb31$export$516836c6a9dfc573, 5000);\n};\n\n\nconst $bf5b431e6a69fea8$export$596d806903d1f59e = async (email, password)=>{\n    try {\n        const res = await axios({\n            method: \"POST\",\n            url: \"/api/v1/users/login\",\n            data: {\n                email: email,\n                password: password\n            }\n        });\n        if (res.data.status === \"success\") {\n            (0, $e9c91518574fdb31$export$de026b00723010c1)(\"success\", `Logged in successfully!`);\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1500);\n        }\n    } catch (err) {\n        var _err_response;\n        (0, $e9c91518574fdb31$export$de026b00723010c1)(\"error\", (_err_response = err.response) === null || _err_response === void 0 ? void 0 : _err_response.data.message);\n    }\n};\nconst $bf5b431e6a69fea8$export$a0973bcfe11b05c9 = async ()=>{\n    try {\n        const res = await axios({\n            method: \"GET\",\n            url: \"/api/v1/users/logout\"\n        });\n        if (res.data.status === \"success\") {\n            (0, $e9c91518574fdb31$export$de026b00723010c1)(\"success\", `Logged out successfully!`);\n            window.setTimeout(()=>{\n                location.assign(\"/\");\n            }, 1000);\n        }\n    } catch (err) {\n        (0, $e9c91518574fdb31$export$de026b00723010c1)(\"error\", \"Error loging out! Try again.\");\n    }\n};\n\n\n/* eslint-disable */ const $b65541e07a62170e$export$4c5dd147b21b9176 = (locations)=>{\n    // Create the map and attach it to the #map\n    const map = L.map(\"map\", {\n        zoomControl: false\n    });\n    // Add a tile layer to add to our map\n    L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n    // Create icon using the image provided by Jonas\n    var greenIcon = L.icon({\n        iconUrl: \"/img/pin.png\",\n        iconSize: [\n            32,\n            40\n        ],\n        iconAnchor: [\n            16,\n            45\n        ],\n        popupAnchor: [\n            0,\n            -50\n        ]\n    });\n    // Add locations to the map\n    const points = [];\n    locations.forEach((loc)=>{\n        // Create points\n        points.push([\n            loc.coordinates[1],\n            loc.coordinates[0]\n        ]);\n        // Add markers\n        L.marker([\n            loc.coordinates[1],\n            loc.coordinates[0]\n        ], {\n            icon: greenIcon\n        }).addTo(map)// Add popup\n        .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\n            autoClose: false,\n            className: \"mapPopup\"\n        }).on(\"mouseover\", function(e) {\n            this.openPopup();\n        }).on(\"mouseout\", function(e) {\n            this.closePopup();\n        });\n    });\n    // Set map bounds to include current location\n    const bounds = L.latLngBounds(points).pad(0.5);\n    map.fitBounds(bounds);\n    // Disable scroll on map\n    map.scrollWheelZoom.disable();\n};\n\n\n/* eslint-disable */ \nconst $955535ce7513e32c$export$f558026a994b6051 = async (data, type)=>{\n    try {\n        const url = type === \"password\" ? \"/api/v1/users/updateMyPassword\" : \"/api/v1/users/updateMe\";\n        const res = await axios({\n            method: \"PATCH\",\n            url: url,\n            data: data\n        });\n        if (res.data.status === \"success\") {\n            (0, $e9c91518574fdb31$export$de026b00723010c1)(\"success\", `${type.toUpperCase()} Updated Successfully`);\n            window.setTimeout(()=>{\n                location.reload(true);\n            }, 1500);\n        }\n    } catch (err) {\n        (0, $e9c91518574fdb31$export$de026b00723010c1)(\"error\", err.response);\n    }\n};\n\n\n\nconst $9fd71c92b6f885af$var$stripe = Stripe(\"pk_test_51PDd2OSF4S8UAi1myY580uKjhHPV0OA9O224LFSkXS6LhwgbEjWtzPTbIFGcpzhalzYm03JPc5hkKlO6EvrZnMwD00sE5OsSUS\");\nconst $9fd71c92b6f885af$export$8d5bdbf26681c0c2 = async (tourID)=>{\n    try {\n        // 1) Get checkout session from API\n        const session = await axios({\n            method: \"GET\",\n            url: `/api/v1/bookings/checkout-session/${tourID}`\n        });\n        //  2) Create checkout form + process+ charge credit card for us\n        await $9fd71c92b6f885af$var$stripe.redirectToCheckout({\n            sessionId: session.data.session.id\n        });\n    } catch (err) {\n        console.error(err);\n        (0, $e9c91518574fdb31$export$de026b00723010c1)(\"error\", err);\n    }\n};\n\n\n// DOM Elements\nconst $407eccdc61ba7a94$var$map = document.getElementById(\"map\");\nconst $407eccdc61ba7a94$var$form = document.getElementById(\"login-form\");\nconst $407eccdc61ba7a94$var$logOutBtn = document.querySelector(\".nav__el--logout\");\nconst $407eccdc61ba7a94$var$userDataForm = document.getElementById(\"data-form\");\nconst $407eccdc61ba7a94$var$userPasswordForm = document.getElementById(\"password-form\");\nconst $407eccdc61ba7a94$var$bookBtn = document.getElementById(\"book-tour\");\n// Displaying map\nif ($407eccdc61ba7a94$var$map) {\n    const locations = JSON.parse($407eccdc61ba7a94$var$map.dataset.locations);\n    (0, $b65541e07a62170e$export$4c5dd147b21b9176)(locations);\n}\n// Login functionality\nif ($407eccdc61ba7a94$var$form) $407eccdc61ba7a94$var$form.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const email = document.getElementById(\"email\").value;\n    const password = document.getElementById(\"password\").value;\n    (0, $bf5b431e6a69fea8$export$596d806903d1f59e)(email, password);\n});\n// logging out users\nif ($407eccdc61ba7a94$var$logOutBtn) $407eccdc61ba7a94$var$logOutBtn.addEventListener(\"click\", (0, $bf5b431e6a69fea8$export$a0973bcfe11b05c9));\n// Updating User data\nif ($407eccdc61ba7a94$var$userDataForm) $407eccdc61ba7a94$var$userDataForm.addEventListener(\"submit\", (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    form.append(\"name\", document.getElementById(\"name\").value);\n    form.append(\"email\", document.getElementById(\"email\").value);\n    form.append(\"photo\", document.getElementById(\"photo\").files[0]);\n    (0, $955535ce7513e32c$export$f558026a994b6051)(form, \"data\");\n});\nif ($407eccdc61ba7a94$var$userPasswordForm) $407eccdc61ba7a94$var$userPasswordForm.addEventListener(\"submit\", async (e)=>{\n    e.preventDefault();\n    // chainging password button value\n    document.getElementById(\"btn-save-password\").textContent = \"Updating...\";\n    // Getting values of the fields from form\n    const passwordCurrent = document.getElementById(\"password-current\").value;\n    const password = document.getElementById(\"password\").value;\n    const passwordConfirm = document.getElementById(\"password-confirm\").value;\n    // updating\n    await (0, $955535ce7513e32c$export$f558026a994b6051)({\n        passwordCurrent: passwordCurrent,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, \"password\");\n    // Setting button value to default\n    document.getElementById(\"btn-save-password\").textContent = \"Save password\";\n    // Setting valued to null after updating\n    document.getElementById(\"password-current\").value = \"\";\n    document.getElementById(\"password\").value = \"\";\n    document.getElementById(\"password-confirm\").value = \"\";\n});\nif ($407eccdc61ba7a94$var$bookBtn) $407eccdc61ba7a94$var$bookBtn.addEventListener(\"click\", (e)=>{\n    // e.preventDefault();\n    e.target.textContent = \"Processing...\";\n    const { tourId: tourId } = e.target.dataset;\n    (0, $9fd71c92b6f885af$export$8d5bdbf26681c0c2)(tourId);\n});\n\n\n//# sourceMappingURL=index.js.map\n","/* eslint-disable */\r\n\r\nimport { login } from './login.js';\r\nimport { displayMap } from './leaflet.js';\r\nimport { logout } from './login.js';\r\nimport { updateSettings } from './updateSettings.js';\r\nimport { bookTour } from './stripe.js';\r\n\r\n// DOM Elements\r\nconst map = document.getElementById('map');\r\nconst form = document.getElementById('login-form');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.getElementById('data-form');\r\nconst userPasswordForm = document.getElementById('password-form');\r\nconst bookBtn = document.getElementById('book-tour');\r\n\r\n// Displaying map\r\nif (map) {\r\n  const locations = JSON.parse(map.dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\n// Login functionality\r\nif (form) {\r\n  form.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n}\r\n\r\n// logging out users\r\nif (logOutBtn) {\r\n  logOutBtn.addEventListener('click', logout);\r\n}\r\n\r\n// Updating User data\r\nif (userDataForm) {\r\n  userDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n    updateSettings(form, 'data');\r\n  });\r\n}\r\n\r\nif (userPasswordForm) {\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    // chainging password button value\r\n    document.getElementById('btn-save-password').textContent = 'Updating...';\r\n\r\n    // Getting values of the fields from form\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n\r\n    // updating\r\n    await updateSettings(\r\n      { passwordCurrent, password, passwordConfirm },\r\n      'password',\r\n    );\r\n\r\n    // Setting button value to default\r\n    document.getElementById('btn-save-password').textContent = 'Save password';\r\n\r\n    // Setting valued to null after updating\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n  });\r\n}\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    // e.preventDefault();\r\n    e.target.textContent = 'Processing...';\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert.js';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: '/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `Logged in successfully!`);\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response?.data.message);\r\n  }\r\n};\r\n\r\nexport const logout = async () => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: '/api/v1/users/logout',\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `Logged out successfully!`);\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1000);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', 'Error loging out! Try again.');\r\n  }\r\n};\r\n","export const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","/* eslint-disable */\r\n\r\nexport const displayMap = (locations) => {\r\n  // Create the map and attach it to the #map\r\n  const map = L.map('map', { zoomControl: false });\r\n\r\n  // Add a tile layer to add to our map\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution:\r\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n  }).addTo(map);\r\n\r\n  // Create icon using the image provided by Jonas\r\n  var greenIcon = L.icon({\r\n    iconUrl: '/img/pin.png',\r\n    iconSize: [32, 40], // size of the icon\r\n    iconAnchor: [16, 45], // point of the icon which will correspond to marker's location\r\n    popupAnchor: [0, -50], // point from which the popup should open relative to the iconAnchor\r\n  });\r\n\r\n  // Add locations to the map\r\n  const points = [];\r\n  locations.forEach((loc) => {\r\n    // Create points\r\n    points.push([loc.coordinates[1], loc.coordinates[0]]);\r\n\r\n    // Add markers\r\n    L.marker([loc.coordinates[1], loc.coordinates[0]], { icon: greenIcon })\r\n      .addTo(map)\r\n      // Add popup\r\n      .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\r\n        autoClose: false,\r\n        className: 'mapPopup',\r\n      })\r\n      .on('mouseover', function (e) {\r\n        this.openPopup();\r\n      })\r\n      .on('mouseout', function (e) {\r\n        this.closePopup();\r\n      });\r\n  });\r\n\r\n  // Set map bounds to include current location\r\n  const bounds = L.latLngBounds(points).pad(0.5);\r\n  map.fitBounds(bounds);\r\n\r\n  // Disable scroll on map\r\n  map.scrollWheelZoom.disable();\r\n};\r\n","/* eslint-disable */\r\nimport { showAlert } from './alert.js';\r\n\r\n// Type is either 'Password' or 'data'\r\nexport const updateSettings = async (data, type) => {\r\n  try {\r\n    const url =\r\n      type === 'password'\r\n        ? '/api/v1/users/updateMyPassword'\r\n        : '/api/v1/users/updateMe';\r\n\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data,\r\n    });\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', `${type.toUpperCase()} Updated Successfully`);\r\n      window.setTimeout(() => {\r\n        location.reload(true);\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response);\r\n  }\r\n};\r\n","import { showAlert } from './alert.js';\r\n\r\nconst stripe = Stripe(\r\n  'pk_test_51PDd2OSF4S8UAi1myY580uKjhHPV0OA9O224LFSkXS6LhwgbEjWtzPTbIFGcpzhalzYm03JPc5hkKlO6EvrZnMwD00sE5OsSUS',\r\n);\r\n\r\nexport const bookTour = async (tourID) => {\r\n  try {\r\n    // 1) Get checkout session from API\r\n    const session = await axios({\r\n      method: 'GET',\r\n      url: `/api/v1/bookings/checkout-session/${tourID}`,\r\n    });\r\n    //  2) Create checkout form + process+ charge credit card for us\r\n    await stripe.redirectToCheckout({\r\n      sessionId: session.data.session.id,\r\n    });\r\n  } catch (err) {\r\n    console.error(err);\r\n    showAlert('error', err);\r\n  }\r\n};\r\n"],"names":["$e9c91518574fdb31$export$516836c6a9dfc573","el","document","querySelector","parentElement","removeChild","$e9c91518574fdb31$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$bf5b431e6a69fea8$export$596d806903d1f59e","email","password","res","axios","method","url","data","status","location","assign","err","_err_response","response","message","$bf5b431e6a69fea8$export$a0973bcfe11b05c9","$955535ce7513e32c$export$f558026a994b6051","toUpperCase","reload","$9fd71c92b6f885af$var$stripe","Stripe","$9fd71c92b6f885af$export$8d5bdbf26681c0c2","tourID","session","redirectToCheckout","sessionId","id","console","error","$407eccdc61ba7a94$var$map","getElementById","$407eccdc61ba7a94$var$form","$407eccdc61ba7a94$var$logOutBtn","$407eccdc61ba7a94$var$userDataForm","$407eccdc61ba7a94$var$userPasswordForm","$407eccdc61ba7a94$var$bookBtn","locations","map","L","zoomControl","tileLayer","attribution","addTo","greenIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","points","forEach","loc","push","coordinates","marker","bindPopup","day","description","autoClose","className","on","e","openPopup","closePopup","bounds","latLngBounds","pad","fitBounds","scrollWheelZoom","disable","JSON","parse","dataset","addEventListener","preventDefault","value","form","FormData","append","files","textContent","passwordCurrent","passwordConfirm","target","tourId"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}